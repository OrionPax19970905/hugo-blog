---
title: "《SQL 必知必会》读书笔记"
date: 2019-07-18T22:21:27+08:00
tags: ["读书笔记", "SQL"]
---

#### 第一课 了解 SQL

- 数据类型兼容问题  
  数据类型及其名称是 SQL 不兼容的一个主要原因。虽然大多数基本数据类型得到了一致的支持，但许多高级的数据类型却没有。更糟的是，偶然会有相同的数据类型在不同的 DBMS 中具有不同的名称。对此用户毫无办法，重要的是在创建表结构时要记住这些差异。
- <mark>应该总是定义主键</mark>  
  虽然并不总是需要主键，但多数数据库设计者都会保证他们创建的每个表具有一个主键，以便于以后的数据操作和管理。

#### 第二课 检索数据

- 不使用通配符  
  一般而言，除非你确实需要表中的每一列，否则最好别使用 \* 通配符。虽然使用通配符能让你自己省事，不用明确列出所需列，但检索不需要的列通常会降低检索和应用程序的性能。
- <mark>不能部分使用 DISTINCT</mark>  
  DISTINCT 关键字作用于所有的列，不仅仅是跟在其后的那一列。例
  如，你指定 `SELECT DISTINCT vend_id, prod_price ...` ，除非指定的
  两列完全相同，否则所有的行都会被检索出来。

#### 第三课 排序检索数据

- 未排序数据  
  如果没有明确排序查询结果，则返回的数据没有特定的顺序。返回数据的顺序可能是数据被添加到表中的顺序，也可能不是。只要返回相同数目的行，就是正常的。如果不排序，数据一般将以它在底层表中出现的顺序显示，这有可能是数据最初添加到表中的顺序。但是如果数据随后进行过更新或删除，那么这个顺序将会受到 DBMS 重用回收存储空间的方式的影响。因此，如果不明确控制的话，则最终的结果不能也不应该依赖该排序顺序。

#### 第四课 过滤数据

- SQL 过滤与应用过滤  
  优化数据库后可以更快速有效地对数据进行过滤。而让客户端应用或开发语言处理数据库的工作将会极大地影响应用的性能，并且使所创建的应用完全不具备可伸缩性。此外，如果在客户端过滤数据，服务器不得不通过网络发送多余的数据，这将导致网络带宽的浪费。

#### 第五课 高级数据过滤

- 在 WHERE 子句中使用圆括号
  AND 在求值过程中优先级比 OR 更高。任何时候使用具有 AND 和 OR 操作符的 WHERE 子句，都应该使用圆括号明确地分组操作符。不要过分依赖默认求值顺序，即使它确实如你希望的那样。<mark>使用圆括号没有什么坏处，它能消除歧义</mark>。
- 为什么要使用 IN 操作符 代替 OR？  
  在有很多合法选项时，IN 操作符的语法更清楚，更直观。在与其他 AND 和 OR 操作符组合使用 IN 时，求值顺序更容易管理。<mark>IN 操作符一般比一组 OR 操作符执行得更快</mark>。<mark>IN 的最大优点是可以包含其他 SELECT 语句</mark>，能够更动态地建立 WHERE 子句。

#### 第六课 用通配符进行过滤

- 使用通配符的技巧  
  通配符搜索一般比前面讨论的其他搜索要耗费更长的处理时间。不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。在确实需要使用通配符时，也尽量不要把它们用在搜索模式的开始处。把通配符置于开始处，搜索起来是最慢的。

#### 第七课 创建计算字段

- 客户端与服务器的格式  
  在 SQL 语句内可完成的许多转换和格式化工作都可以直接在客户端应用程序内完成。但一般来说，在数据库服务器上完成这些操作比在客户端中完成要快得多。

#### 第八课 使用函数处理数据

- 函数带来的问题
  - 不可移植  
    为了代码的可移植，许多 SQL 程序员不赞成使用特定于实现的功能。虽然这样做很有好处，但有的时候并不利于应用程序的性能。如果不使用这些函数，编写某些应用程序代码会很艰难。必须利用其他方法来实现 DBMS 可以非常有效完成的工作。
  - 是否应该使用函数？  
    现在，你面临是否应该使用函数的选择。决定权在你，使用或是不使用也没有对错之分。如果你决定使用函数，应该保证做好代码注释，以便以后你（或其他人）能确切地知道所编写的 SQL 代码的含义。
